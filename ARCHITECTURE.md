# ğŸ—ï¸ Arquitectura del Sistema - Jeopardy Trivia

## ğŸ“‹ Diagrama de Arquitectura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        JEOPARDY TRIVIA                          â”‚
â”‚                      Tech Edition v1.0                         â”‚
â”‚                    Arquitectura del Sistema                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAPA DE PRESENTACIÃ“N                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HOST PANEL    â”‚    â”‚  PLAYER PANEL   â”‚    â”‚   GAME BOARD    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Game Control  â”‚    â”‚ â€¢ Registration  â”‚    â”‚ â€¢ Questions     â”‚
â”‚ â€¢ Player List   â”‚    â”‚ â€¢ Answer Input  â”‚    â”‚ â€¢ Options       â”‚
â”‚ â€¢ Question Mgmt â”‚    â”‚ â€¢ Results       â”‚    â”‚ â€¢ Timer           â”‚
â”‚ â€¢ Leaderboard   â”‚    â”‚ â€¢ Score Display â”‚    â”‚ â€¢ Animations    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAPA DE APLICACIÃ“N                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚   WEBSOCKETS    â”‚    â”‚   STATE MGMT    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Next.js 14    â”‚    â”‚ â€¢ Real-time     â”‚    â”‚ â€¢ Game State    â”‚
â”‚ â€¢ React 18      â”‚    â”‚ â€¢ Broadcasting  â”‚    â”‚ â€¢ User State    â”‚
â”‚ â€¢ TypeScript    â”‚    â”‚ â€¢ Event Sync    â”‚    â”‚ â€¢ Question Stateâ”‚
â”‚ â€¢ Tailwind CSS  â”‚    â”‚ â€¢ Reconnection  â”‚    â”‚ â€¢ Score State   â”‚
â”‚ â€¢ Framer Motion â”‚    â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAPA DE SERVICIOS                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    BACKEND      â”‚    â”‚   API LAYER     â”‚    â”‚   BUSINESS      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚   LOGIC         â”‚
â”‚ â€¢ FastAPI       â”‚    â”‚ â€¢ REST Endpointsâ”‚    â”‚ â€¢ Game Rules    â”‚
â”‚ â€¢ Python 3.11   â”‚    â”‚ â€¢ WebSocket     â”‚    â”‚ â€¢ Score Logic   â”‚
â”‚ â€¢ Uvicorn       â”‚    â”‚ â€¢ Validation    â”‚    â”‚ â€¢ Timer Logic   â”‚
â”‚ â€¢ Pydantic      â”‚    â”‚ â€¢ Error Handlingâ”‚    â”‚ â€¢ State Logic   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CAPA DE DATOS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DATABASE      â”‚    â”‚   PERSISTENCE   â”‚    â”‚   CACHE         â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ SQLite        â”‚    â”‚ â€¢ User Data     â”‚    â”‚ â€¢ Game State    â”‚
â”‚ â€¢ SQLAlchemy    â”‚    â”‚ â€¢ Questions     â”‚    â”‚ â€¢ Session Data  â”‚
â”‚ â€¢ ORM           â”‚    â”‚ â€¢ Answers       â”‚    â”‚ â€¢ Temp Data     â”‚
â”‚ â€¢ Migrations    â”‚    â”‚ â€¢ Scores        â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Flujo de Datos

### **1. Registro de Usuario**
```
Usuario â†’ Frontend â†’ API /register â†’ Database â†’ WebSocket â†’ Todos los clientes
```

### **2. Inicio de Juego**
```
Host â†’ Frontend â†’ API /start-game â†’ Database â†’ WebSocket â†’ Countdown â†’ Primera pregunta
```

### **3. Pregunta Activa**
```
Sistema â†’ WebSocket â†’ Todos los clientes â†’ Timer (15s) â†’ Respuestas â†’ ValidaciÃ³n â†’ PuntuaciÃ³n
```

### **4. Siguiente Pregunta**
```
Host â†’ Frontend â†’ API /next-question â†’ Database â†’ WebSocket â†’ Nueva pregunta â†’ Reset timer
```

## ğŸ—ï¸ Componentes del Sistema

### **Frontend (Next.js)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND ARCHITECTURE                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PAGE.TSX      â”‚    â”‚   LAYOUT.TSX    â”‚    â”‚   COMPONENTS    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Role Selectionâ”‚    â”‚ â€¢ Global Styles â”‚    â”‚ â€¢ HostPanel     â”‚
â”‚ â€¢ URL Detection â”‚    â”‚ â€¢ Particles     â”‚    â”‚ â€¢ PlayerPanel   â”‚
â”‚ â€¢ Routing       â”‚    â”‚ â€¢ Fonts         â”‚    â”‚ â€¢ GameBoard     â”‚
â”‚                 â”‚    â”‚ â€¢ Metadata      â”‚    â”‚ â€¢ Leaderboard   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   STATE MGMT    â”‚    â”‚   WEBSOCKET     â”‚    â”‚   ANIMATIONS    â”‚
â”‚                 â”‚    â”‚   CONNECTION    â”‚    â”‚                 â”‚
â”‚ â€¢ Game State    â”‚    â”‚ â€¢ Auto Connect  â”‚    â”‚ â€¢ Framer Motion  â”‚
â”‚ â€¢ User State    â”‚    â”‚ â€¢ Event Handler â”‚    â”‚ â€¢ Transitions    â”‚
â”‚ â€¢ Question Stateâ”‚    â”‚ â€¢ Reconnection  â”‚    â”‚ â€¢ Effects        â”‚
â”‚ â€¢ Timer State   â”‚    â”‚ â€¢ Error Handlingâ”‚    â”‚ â€¢ Particles      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Backend (FastAPI)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND ARCHITECTURE                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MAIN.PY       â”‚    â”‚   MODELS       â”‚    â”‚   ENDPOINTS     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ FastAPI App   â”‚    â”‚ â€¢ User Model    â”‚    â”‚ â€¢ /register     â”‚
â”‚ â€¢ WebSocket     â”‚    â”‚ â€¢ Question Modelâ”‚    â”‚ â€¢ /start-game    â”‚
â”‚ â€¢ CORS          â”‚    â”‚ â€¢ Answer Model  â”‚    â”‚ â€¢ /next-questionâ”‚
â”‚ â€¢ Middleware    â”‚    â”‚ â€¢ Pydantic      â”‚    â”‚ â€¢ /submit-answerâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DATABASE      â”‚    â”‚   WEBSOCKET     â”‚    â”‚   GAME LOGIC    â”‚
â”‚   OPERATIONS    â”‚    â”‚   MANAGER       â”‚    â”‚                 â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ CRUD Ops      â”‚    â”‚ â€¢ Connections   â”‚    â”‚ â€¢ Game State    â”‚
â”‚ â€¢ Transactions  â”‚    â”‚ â€¢ Broadcasting  â”‚    â”‚ â€¢ Score Logic   â”‚
â”‚ â€¢ Queries       â”‚    â”‚ â€¢ Event Handlingâ”‚    â”‚ â€¢ Timer Logic   â”‚
â”‚ â€¢ Migrations    â”‚    â”‚ â€¢ Error Handlingâ”‚    â”‚ â€¢ Question Logicâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—„ï¸ Modelo de Datos

### **Entidades Principales**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DATABASE SCHEMA                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      USERS      â”‚    â”‚    QUESTIONS    â”‚    â”‚  USER_ANSWERS   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ id (PK)       â”‚    â”‚ â€¢ id (PK)       â”‚    â”‚ â€¢ id (PK)       â”‚
â”‚ â€¢ name          â”‚    â”‚ â€¢ question_text â”‚    â”‚ â€¢ user_id (FK)  â”‚
â”‚ â€¢ score         â”‚    â”‚ â€¢ option_a      â”‚    â”‚ â€¢ question_id   â”‚
â”‚ â€¢ is_host       â”‚    â”‚ â€¢ option_b      â”‚    â”‚ â€¢ selected_ans  â”‚
â”‚ â€¢ created_at    â”‚    â”‚ â€¢ option_c      â”‚    â”‚ â€¢ is_correct    â”‚
â”‚                 â”‚    â”‚ â€¢ option_d      â”‚    â”‚ â€¢ answered_at   â”‚
â”‚                 â”‚    â”‚ â€¢ correct_answerâ”‚    â”‚                 â”‚
â”‚                 â”‚    â”‚ â€¢ is_active     â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   GAME STATE    â”‚
                    â”‚                 â”‚
                    â”‚ â€¢ is_registration_open â”‚
                    â”‚ â€¢ is_game_started      â”‚
                    â”‚ â€¢ is_question_active    â”‚
                    â”‚ â€¢ current_question      â”‚
                    â”‚ â€¢ time_remaining        â”‚
                    â”‚ â€¢ question_timer         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Patrones de ComunicaciÃ³n

### **WebSocket Events**
```typescript
// Eventos del Sistema
interface WebSocketEvents {
  // Registro
  'registration_started': { message: string }
  'host_confirmed': { message: string }
  
  // Juego
  'game_started': { message: string, countdown: number }
  'new_question': { question: Question, timer: number }
  'game_finished': { leaderboard: User[] }
  
  // Estado
  'game_state': { state: GameState }
}
```

### **API Endpoints**
```typescript
// REST API Structure
interface APIEndpoints {
  // Usuario
  'POST /register': { name: string, is_host: boolean } â†’ User
  'GET /users': void â†’ User[]
  
  // Juego
  'POST /start-registration': void â†’ { message: string }
  'POST /start-game': void â†’ { message: string }
  'POST /start-first-question': void â†’ { message: string }
  'POST /next-question': void â†’ { message: string }
  'POST /submit-answer': { user_id: number, question_id: number, selected_answer: string } â†’ { correct: boolean, score: number }
}
```

## ğŸš€ Despliegue y Escalabilidad

### **Docker Architecture**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DOCKER DEPLOYMENT                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   DATABASE      â”‚
â”‚   CONTAINER     â”‚    â”‚   CONTAINER     â”‚    â”‚   VOLUME        â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Next.js App   â”‚    â”‚ â€¢ FastAPI App   â”‚    â”‚ â€¢ SQLite File   â”‚
â”‚ â€¢ Port 3000     â”‚    â”‚ â€¢ Port 8000     â”‚    â”‚ â€¢ Persistent    â”‚
â”‚ â€¢ Static Assets â”‚    â”‚ â€¢ WebSocket     â”‚    â”‚ â€¢ Shared        â”‚
â”‚ â€¢ Build Optimizedâ”‚    â”‚ â€¢ Health Checksâ”‚    â”‚ â€¢ Backup Ready  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NGINX         â”‚    â”‚   DOCKER        â”‚    â”‚   MONITORING    â”‚
â”‚   PROXY         â”‚    â”‚   COMPOSE       â”‚    â”‚                 â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Load Balance  â”‚    â”‚ â€¢ Orchestration â”‚    â”‚ â€¢ Health Checks â”‚
â”‚ â€¢ SSL/TLS       â”‚    â”‚ â€¢ Networking    â”‚    â”‚ â€¢ Logs           â”‚
â”‚ â€¢ Static Files  â”‚    â”‚ â€¢ Volumes       â”‚    â”‚ â€¢ Metrics       â”‚
â”‚ â€¢ WebSocket     â”‚    â”‚ â€¢ Environment   â”‚    â”‚ â€¢ Alerts        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Kubernetes Architecture**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      KUBERNETES DEPLOYMENT                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   INGRESS       â”‚    â”‚   SERVICES       â”‚    â”‚   DEPLOYMENTS   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ Nginx Controllerâ”‚    â”‚ â€¢ Frontend SVC  â”‚    â”‚ â€¢ Frontend (2)  â”‚
â”‚ â€¢ SSL/TLS       â”‚    â”‚ â€¢ Backend SVC    â”‚    â”‚ â€¢ Backend (2)   â”‚
â”‚ â€¢ Load Balance  â”‚    â”‚ â€¢ ClusterIP      â”‚    â”‚ â€¢ Auto Scaling  â”‚
â”‚ â€¢ WebSocket     â”‚    â”‚ â€¢ Health Checks  â”‚    â”‚ â€¢ Rolling Updateâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CONFIGMAPS    â”‚    â”‚   PVC           â”‚    â”‚   MONITORING    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ App Config    â”‚    â”‚ â€¢ Database Data   â”‚    â”‚ â€¢ Prometheus    â”‚
â”‚ â€¢ Questions     â”‚    â”‚ â€¢ Persistent    â”‚    â”‚ â€¢ Grafana       â”‚
â”‚ â€¢ Environment   â”‚    â”‚ â€¢ Backup Ready  â”‚    â”‚ â€¢ Logs          â”‚
â”‚ â€¢ Secrets       â”‚    â”‚ â€¢ Shared        â”‚    â”‚ â€¢ Alerts        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”’ Seguridad y Rendimiento

### **Medidas de Seguridad**
- **ValidaciÃ³n de datos** con Pydantic
- **SanitizaciÃ³n** de inputs del usuario
- **Rate limiting** en endpoints crÃ­ticos
- **CORS** configurado correctamente
- **WebSocket** con autenticaciÃ³n implÃ­cita

### **Optimizaciones de Rendimiento**
- **Conexiones WebSocket** persistentes
- **Broadcasting** eficiente a mÃºltiples clientes
- **Caching** de estado del juego
- **CompresiÃ³n** de assets estÃ¡ticos
- **Lazy loading** de componentes

### **Monitoreo y Observabilidad**
- **Health checks** en todos los servicios
- **Logs estructurados** para debugging
- **MÃ©tricas** de rendimiento
- **Alertas** automÃ¡ticas
- **Tracing** de requests

## ğŸ“ˆ Escalabilidad

### **Escalado Horizontal**
- **MÃºltiples rÃ©plicas** de frontend y backend
- **Load balancing** automÃ¡tico
- **Session affinity** para WebSockets
- **Database sharding** (futuro)

### **Escalado Vertical**
- **Resource limits** configurados
- **Auto-scaling** basado en CPU/memoria
- **Graceful shutdown** de pods
- **Rolling updates** sin downtime

---

**Esta arquitectura estÃ¡ diseÃ±ada para ser escalable, mantenible y robusta, proporcionando una excelente experiencia de usuario mientras mantiene la simplicidad de desarrollo y despliegue.**
